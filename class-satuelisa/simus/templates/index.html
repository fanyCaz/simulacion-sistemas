<!DOCTYPE html>
<html>
    <style>
        .light-on{
            background-color: bisque;
        }
        .light-off{
            background-color: #000;
        }
        .sqr-unaDim{
            width: 20px;
            height: 20px;
        }
        #unaDim-contenedor{
            margin: 1em;
            display: grid;
            grid-template-columns: 20px 20px 20px 20px 20px 20px 20px 20px 20px 20px 20px;
            grid-template-rows: 100%;
        }
    </style>
    <body>
        Holi
        <button id="btnGetValues">Traer Valores</button>
        <h4>Números en una dimensión</h4>
        <div id="unaDim-contenedor">
            <div class="sqr-unaDim light-off" id="unaDim-0"></div>
            <div class="sqr-unaDim light-off" id="unaDim-1"></div>
            <div class="sqr-unaDim light-off" id="unaDim-2"></div>
            <div class="sqr-unaDim light-off" id="unaDim-3"></div>
            <div class="sqr-unaDim light-off" id="unaDim-4"></div>
            <div class="sqr-unaDim light-off" id="unaDim-5"></div>
            <div class="sqr-unaDim light-off" id="unaDim-6"></div>
            <div class="sqr-unaDim light-off" id="unaDim-7"></div>
            <div class="sqr-unaDim light-off" id="unaDim-8"></div>
            <div class="sqr-unaDim light-off" id="unaDim-9"></div>
            <div class="sqr-unaDim light-off" id="unaDim-10"></div>
        </div>
    </body>
<script>
    let resetArreglo = () =>{
        let unaDim = document.getElementsByClassName("sqr-unaDim");
        console.log( unaDim );
        for(var i= 0; i < unaDim.length; i++){
            unaDim[i].classList.add("light-off");
            unaDim[i].classList.remove("light-on");
        }
    }

    let mostrarArreglo = (valores) =>{
        resetArreglo();
        setTimeout( ()=>{
            valores.forEach(element => {
                let divElemento = document.getElementById( "unaDim-"+element );
                divElemento.classList.add("light-off");
                console.log(divElemento);
                console.log("element " + element);
                
                    divElemento.classList.remove("light-off");
                    divElemento.classList.add("light-on"); 
                
            });
        },5000 );
    };

    let btnGetValues = document.getElementById('btnGetValues');
    btnGetValues.addEventListener('click',()=>{
        xhttp = new XMLHttpRequest();
        xhttp.open("GET","{{ url_for('brownianValues') }}",true);
        xhttp.send();
        xhttp.onreadystatechange = () =>{
            console.log(xhttp.readyState);
            if(xhttp.readyState == XMLHttpRequest.DONE){
                console.log("received, yei");
                if(xhttp.status == 200){
                    console.log("si traer bien");
                    var response = JSON.parse( xhttp.responseText );
                    var pos_values = response.pos_values;
                    var mayor = response.mayor;
                    mostrarArreglo(pos_values);
                }else{
                    console.log("no lo trajo bien, hay error");
                }
            }else{
                console.log("not yet, wait for it");
            }
        };
    });


</script>
</html>